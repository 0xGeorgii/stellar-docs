---
title: Circle Configuration
id: circle-configuration
sidebar_position: 70
---

## Using a Shared Circle Account Across All Tenants

If the tenant was created with a [Circle] distribution account, then the tenant owner will need to manually configure that account from within the SDP dashboard.

Once a user with owner privileges logs in, they will see a banner at the top of the page saying that the Circle account is pending configuration:

![Circle Configuration Banner](/assets/SDP/SDP30.png)

Clicking on the banner will take the user to the **Distribution Account** section, where they can enter the Circle **API Key** and the Circle **Wallet ID**.

![Circle Configuration](/assets/SDP/SDP31.png)

:::info

The API key will be stored in the database encrypted by the key `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE`, while the Wallet ID is stored in plain text.

The Wallet ID is used to identify the Circle (internal) account when making disbursements. It's useful because a Circle account can have multiple wallets, each one with different currencies and balances.

:::

## Using Circle Sub-Accounts for Multi-Tenant Management

In a multi-tenant environment, you may choose to use a single Circle account to manage funds for multiple agencies by utilizing Circle sub-accounts. This approach allows the main organization to maintain control over the primary funding source while providing each tenant with their own dedicated Circle wallet.

### Steps to Configure Circle Sub-Accounts for Tenants

#### 1. Create Circle Sub-Account

Create a sub-account in Circle from your main wallet. This process is done within the Circle platform and is separate from SDP configuration. Please refer to <a href="https://developers.circle.com/circle-mint/create-a-sub-account" target="_blank" rel="noopener noreferrer">Circle's documentation</a> on how to create sub-accounts.

#### 2. Create Tenant for the Agency

In the SDP, add a new tenant for the agency. Refer to <a href="https://developers.stellar.org/platforms/stellar-disbursement-platform/api-reference/admin" target="_blank" rel="noopener noreferrer">the documentation on creating tenants</a> for guidance. As the initial owner, you will receive an invite link via email. Use this link to log in to SDP as the new tenant owner.

#### 3. Configure Circle Sub-Account for the Tenant

Assign the sub-account to the tenant by updating the Circle configuration with the **API Key** and **Wallet ID** specific to the sub-account.

![Configure Circle Sub-Account](/assets/SDP/SDP32.png)

#### 4. Invite Agency User

Create an account for the agency representative. They will receive an email invitation and can log in to SDP to manage disbursements. When creating the user, select the appropriate role:

- **Owner**: Full control over users and configuration.
- **Financial Controller**: Read access to data and can submit new disbursements; cannot manage users or settings.
- **Business User**: Limited access, suitable for operational roles.
- **Developer**: Technical access for API integration and testing.

![Invite Agency User](/assets/SDP/SDP33.png)

:::note

We highly recommend confirming with Circle that using sub-accounts for aid disbursements for other agencies aligns with your current Circle agreement.

:::

By following these steps, you can effectively manage multiple tenants within SDP using a single Circle account with sub-accounts, ensuring each agency has dedicated wallets while maintaining centralized control over the main funding source.

[Circle]: https://www.circle.com
